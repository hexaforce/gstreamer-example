<html>
  <head>
    <script src="//d3js.org/d3.v3.min.js" charset="utf-8"></script>
    <link href="main.css" rel="stylesheet" />
    <script src="script.js"></script>
    <script type="text/javascript">
      window.onload = load
      setInterval(() => interval(), 1000)
    </script>
  </head>
  <body>
    <button id="fullscreen-btn">Go Fullscreen</button>
    <div>
      <video id="stream" autoplay playsinline muted>Your browser does not support video</video>
    </div>
    <div id="peercontainer">
      <div>
        Peer Connection
        <pre id="peer-connection"></pre>
      </div>
      <div id="rtpcontainer">
        <div id="inbound-rtp-video-chart">
          Inbound RTP Video
          <script>
            ;(() => {
              var transition = d3.select({}).transition().duration(750).ease('linear')
              chart('#inbound-rtp-video-chart', [1, n - 2], [0, 1.5], 'basis', function tick(path, line, data, x) {
                transition = transition
                  .each(() => {
                    data.push(bitrates['inbound-rtp-video'] || 0)
                    path
                      .attr('d', line)
                      .attr('transform', null)
                      .transition()
                      .attr('transform', 'translate(' + x(0) + ')')
                    data.shift()
                  })
                  .transition()
                  .each('start', () => tick(path, line, data, x))
              })
            })()
          </script>
        </div>
        <div id="inbound-rtp-audio-chart">
          Inbound RTP Audio
          <script>
            ;(() => {
              var transition = d3.select({}).transition().duration(750).ease('linear')
              chart('#inbound-rtp-audio-chart', [1, n - 2], [0, 0.2], 'basis', function tick(path, line, data, x) {
                transition = transition
                  .each(() => {
                    data.push(bitrates['inbound-rtp-audio'] || 0)
                    path
                      .attr('d', line)
                      .attr('transform', null)
                      .transition()
                      .attr('transform', 'translate(' + x(0) + ')')
                    data.shift()
                  })
                  .transition()
                  .each('start', () => tick(path, line, data, x))
              })
            })()
          </script>
        </div>
      </div>
    </div>
    <div id="ctatisticscontainer">
      <div>
        Inbound RTP Video
        <pre id="inbound-rtp-video"></pre>
      </div>
      <div>
        Inbound RTP Audio
        <pre id="inbound-rtp-audio"></pre>
      </div>
    </div>
  </body>
</html>
